<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¼ å…¬ç¾½çš„ä¸ªäººæ—¥å†</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600;700&family=Inter:wght@300;400;500;600&family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Nunito', 'Noto Serif SC', 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
            background: linear-gradient(135deg, #ffeef8 0%, #ffe4f0 50%, #f8e8ff 100%);
        }
        
        /* å¯çˆ±èƒŒæ™¯ç³»ç»Ÿ */
        .bg-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: linear-gradient(135deg, #ffeef8 0%, #ffe4f0 25%, #f8e8ff 50%, #fff0f5 75%, #ffe4e1 100%);
            overflow: hidden;
        }
        
        .bg-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(255, 182, 193, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(221, 160, 221, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(255, 218, 185, 0.2) 0%, transparent 40%),
                radial-gradient(circle at 60% 60%, rgba(176, 224, 230, 0.2) 0%, transparent 40%);
            animation: bgFloat 20s ease-in-out infinite;
        }
        
        @keyframes bgFloat {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(2%, 2%) rotate(1deg); }
            66% { transform: translate(-1%, 1%) rotate(-1deg); }
        }
        
        .bg-image {
            display: none;
        }
        
        .bg-overlay {
            display: none;
        }
        
        /* åŠ è½½æ–‡å­— - éšè— */
        .loading-text {
            display: none;
        }
        
        /* ä¸»å®¹å™¨ */
        .main-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 1rem;
            position: relative;
            z-index: 1;
        }
        
        /* å¯çˆ±å¡ç‰‡ */
        .glass-card {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 245, 250, 0.95) 100%);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 182, 193, 0.4);
            border-radius: 28px;
            box-shadow: 
                0 20px 60px -15px rgba(255, 105, 180, 0.3),
                0 8px 25px -5px rgba(255, 182, 193, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            overflow: hidden;
            width: 100%;
            max-width: 800px;
            animation: cardFloat 1s ease-out;
        }
        
        @keyframes cardFloat {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* ===== çªå‡ºæ˜¾ç¤ºçš„æ—¥æœŸåŒºåŸŸ ===== */
        .hero-date-section {
            padding: 1.5rem 1rem 0.8rem;
            text-align: center;
            border-bottom: 2px dashed rgba(255, 182, 193, 0.5);
            background: linear-gradient(180deg, rgba(255, 240, 245, 0.5) 0%, transparent 100%);
        }
        
        .year-month {
            font-size: 0.9rem;
            color: #ff69b4;
            letter-spacing: 0.2em;
            margin-bottom: 0.3rem;
            font-weight: 600;
        }
        
        /* å¤§æ—¥æœŸæ˜¾ç¤º */
        .big-day {
            font-size: clamp(3.5rem, 14vw, 7rem);
            font-weight: 800;
            background: linear-gradient(135deg, #ff69b4 0%, #ff8c69 50%, #ffa500 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
            margin: 0;
            filter: drop-shadow(0 2px 8px rgba(255, 105, 180, 0.3));
            font-family: 'Nunito', sans-serif;
        }
        
        .weekday-name {
            font-size: 1rem;
            color: #ff8c69;
            letter-spacing: 0.25em;
            margin-top: 0.3rem;
            font-weight: 600;
        }
        
        /* å†œå†æ—¥æœŸ */
        .lunar-info {
            margin-top: 0.6rem;
            padding-top: 0.6rem;
            border-top: 1px solid rgba(255, 182, 193, 0.3);
        }
        
        .lunar-date {
            font-size: 0.85rem;
            color: #9370db;
            letter-spacing: 0.08em;
            font-weight: 500;
        }
        
        .lunar-festival {
            font-size: 0.8rem;
            color: #ff1493;
            margin-top: 0.15rem;
            font-weight: 600;
        }
        
        /* ===== å¤è¯—è¯åŒºåŸŸ ===== */
        .poetry-section {
            padding: 0.8rem 1rem;
            background: linear-gradient(90deg, rgba(255, 218, 185, 0.3) 0%, rgba(255, 182, 193, 0.3) 50%, rgba(221, 160, 221, 0.3) 100%);
            text-align: center;
            position: relative;
        }
        
        .poetry-section::before,
        .poetry-section::after {
            content: 'âœ¨';
            position: absolute;
            font-size: 1.2rem;
            opacity: 0.6;
        }
        
        .poetry-section::before {
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .poetry-section::after {
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .poetry-content {
            max-width: 400px;
            margin: 0 auto;
        }
        
        .poetry-quote {
            font-size: 1.05rem;
            color: #6b5b95;
            line-height: 1.7;
            letter-spacing: 0.08em;
            font-weight: 600;
        }
        
        .poetry-author {
            font-size: 0.8rem;
            color: #9370db;
            margin-top: 0.4rem;
            font-weight: 500;
        }
        
        .poetry-divider {
            width: 40px;
            height: 3px;
            background: linear-gradient(90deg, #ffb6c1, #dda0dd);
            border-radius: 2px;
            margin: 0.5rem auto;
        }
        
        /* ===== ä¸»ä½“å†…å®¹åŒºåŸŸ ===== */
        .content-body {
            display: grid;
            grid-template-columns: 1.2fr 1fr;
            min-height: auto;
        }
        
        @media (max-width: 900px) {
            .content-body {
                grid-template-columns: 1fr;
            }
        }
        
        /* æ—¥å†ç½‘æ ¼åŒºåŸŸ */
        .calendar-section {
            padding: 1rem;
            border-right: 2px dashed rgba(255, 182, 193, 0.3);
        }
        
        @media (max-width: 900px) {
            .calendar-section {
                border-right: none;
                border-bottom: 2px dashed rgba(255, 182, 193, 0.3);
            }
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.8rem;
        }
        
        .current-month {
            font-size: 1rem;
            color: #ff69b4;
            font-weight: 700;
        }
        
        .nav-btn {
            background: linear-gradient(135deg, #ffb6c1 0%, #dda0dd 100%);
            border: none;
            color: #fff;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 700;
            box-shadow: 0 2px 8px rgba(255, 105, 180, 0.3);
            transition: all 0.2s ease;
        }
        
        .nav-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(255, 105, 180, 0.4);
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.25rem;
        }
        
        .weekday {
            text-align: center;
            font-size: 0.75rem;
            color: #9370db;
            padding: 0.35rem 0;
            font-weight: 700;
        }
        
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            color: #6b5b95;
            cursor: pointer;
            border-radius: 12px;
            font-weight: 600;
            transition: all 0.2s ease;
        }
        
        .calendar-day:hover {
            background: rgba(255, 182, 193, 0.3);
            transform: scale(1.1);
        }
        
        .calendar-day.other-month {
            color: rgba(107, 91, 149, 0.3);
        }
        
        .calendar-day.today {
            background: linear-gradient(135deg, #ff69b4 0%, #ff8c69 100%);
            color: #fff;
            box-shadow: 0 3px 10px rgba(255, 105, 180, 0.4);
        }
        
        .calendar-day.selected {
            background: rgba(221, 160, 221, 0.4);
            border: 2px solid #dda0dd;
        }
        
        /* ä¿¡æ¯é¢æ¿ */
        .info-panel {
            padding: 0.8rem;
            display: flex;
            flex-direction: column;
            gap: 0.6rem;
        }
        
        /* å¤©æ°”æ¨¡å— */
        .weather-module {
            background: linear-gradient(145deg, rgba(255, 240, 245, 0.9) 0%, rgba(240, 248, 255, 0.9) 100%);
            border-radius: 16px;
            padding: 0.9rem;
            border: 2px solid rgba(255, 182, 193, 0.3);
            box-shadow: 0 4px 15px rgba(255, 105, 180, 0.1);
        }
        
        .weather-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }
        
        .location {
            font-size: 0.75rem;
            color: #9370db;
            font-weight: 600;
        }
        
        .aqi-badge {
            font-size: 0.65rem;
            padding: 0.2rem 0.5rem;
            background: linear-gradient(135deg, #98fb98 0%, #90ee90 100%);
            color: #2e8b57;
            border-radius: 12px;
            font-weight: 700;
        }
        
        .weather-main {
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }
        
        .weather-icon {
            font-size: 2.5rem;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
        }
        
        .temperature {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, #ff69b4 0%, #9370db 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-family: 'Nunito', sans-serif;
        }
        
        .weather-desc {
            font-size: 0.85rem;
            color: #6b5b95;
            font-weight: 500;
        }
        
        /* ç©¿è¡£å»ºè®®æ¨¡å— */
        .clothing-module {
            background: linear-gradient(145deg, rgba(255, 250, 240, 0.9) 0%, rgba(255, 240, 245, 0.9) 100%);
            border-radius: 16px;
            padding: 0.9rem;
            border: 2px solid rgba(255, 218, 185, 0.4);
            box-shadow: 0 4px 15px rgba(255, 182, 193, 0.1);
        }
        
        .clothing-title {
            font-size: 0.75rem;
            color: #ff8c69;
            margin-bottom: 0.4rem;
            font-weight: 700;
        }
        
        .clothing-advice {
            font-size: 0.9rem;
            line-height: 1.6;
            color: #6b5b95;
            font-weight: 500;
        }
        
        .clothing-icons {
            margin-top: 0.4rem;
            font-size: 1.4rem;
            letter-spacing: 0.4rem;
        }
        
        /* é¡µè„š */
        .footer {
            padding: 0.8rem;
            border-top: 2px dashed rgba(255, 182, 193, 0.3);
            text-align: center;
            background: linear-gradient(180deg, transparent 0%, rgba(255, 240, 245, 0.5) 100%);
        }
        
        .footer-text {
            font-size: 0.75rem;
            color: #ff8c69;
            font-weight: 600;
        }
        
        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 768px) {
            .main-container {
                padding: 0.3rem;
            }
            
            .glass-card {
                border-radius: 12px;
            }
            
            .hero-date-section {
                padding: 0.8rem 0.6rem 0.5rem;
            }
            
            .big-day {
                font-size: clamp(2.5rem, 10vw, 4rem);
            }
            
            .weekday-name {
                font-size: 0.85rem;
            }
            
            .poetry-section {
                padding: 0.5rem 0.6rem;
            }
            
            .poetry-quote {
                font-size: 0.9rem;
            }
            
            .calendar-section,
            .info-panel {
                padding: 0.6rem;
            }
            
            .temperature {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- å¯çˆ±èƒŒæ™¯ç³»ç»Ÿ -->
    <div class="bg-container">
        <div class="bg-image active" id="bgImage"></div>
        <div class="bg-overlay"></div>
    </div>
    
    <div class="loading-text" id="loadingText"></div>
    
    <!-- ä¸»å®¹å™¨ -->
    <div class="main-container">
        <div class="glass-card">
            <!-- çªå‡ºæ˜¾ç¤ºçš„æ—¥æœŸåŒºåŸŸ -->
            <section class="hero-date-section">
                <p class="year-month" id="yearMonth">2026å¹´ 2æœˆ</p>
                <h1 class="big-day" id="bigDay">1</h1>
                <p class="weekday-name" id="weekdayName">æ˜ŸæœŸæ—¥</p>
                
                <div class="lunar-info">
                    <p class="lunar-date" id="lunarDate">å†œå†æ­£æœˆåˆå›› Â· ä¹™å·³å¹´</p>
                    <p class="lunar-festival" id="lunarFestival"></p>
                </div>
            </section>
            
            <!-- å¤è¯—è¯åŒºåŸŸ -->
            <section class="poetry-section">
                <div class="poetry-content">
                    <p class="poetry-quote" id="poetryLine1">ä¸€å¹´ä¹‹è®¡åœ¨äºæ˜¥</p>
                    <p class="poetry-quote" id="poetryLine2">ä¸€æ—¥ä¹‹è®¡åœ¨äºæ™¨</p>
                    <div class="poetry-divider"></div>
                    <p class="poetry-author" id="poetryAuthor">â€”â€” ã€Šå¢å¹¿è´¤æ–‡ã€‹</p>
                </div>
            </section>
            
            <!-- ä¸»ä½“å†…å®¹ -->
            <div class="content-body">
                <!-- æ—¥å†ç½‘æ ¼ -->
                <section class="calendar-section">
                    <div class="calendar-header">
                        <button class="nav-btn" onclick="changeMonth(-1)">â€¹</button>
                        <h2 class="current-month" id="currentMonth">2026å¹´2æœˆ</h2>
                        <button class="nav-btn" onclick="changeMonth(1)">â€º</button>
                    </div>
                    
                    <div class="calendar-grid" id="calendarGrid">
                        <!-- æ˜ŸæœŸæ ‡é¢˜ -->
                        <div class="weekday">æ—¥</div>
                        <div class="weekday">ä¸€</div>
                        <div class="weekday">äºŒ</div>
                        <div class="weekday">ä¸‰</div>
                        <div class="weekday">å››</div>
                        <div class="weekday">äº”</div>
                        <div class="weekday">å…­</div>
                        <!-- æ—¥æœŸç”±JSç”Ÿæˆ -->
                    </div>
                </section>
                
                <!-- ä¿¡æ¯é¢æ¿ -->
                <aside class="info-panel">
                    <!-- å¤©æ°”æ¨¡å— -->
                    <div class="weather-module" id="weatherModule">
                        <div class="weather-header">
                            <span class="location" id="location">æ„ŸçŸ¥å¤©æ°”ä¸­...</span>
                            <span class="aqi-badge" id="aqi">AQI --</span>
                        </div>
                        <div class="weather-main">
                            <span class="weather-icon" id="weatherIcon">â›…</span>
                            <div>
                                <div class="temperature" id="temperature">--Â°</div>
                                <div class="weather-desc" id="weatherDesc">è·å–ä½ç½®ä¸­...</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ç©¿è¡£å»ºè®®æ¨¡å— -->
                    <div class="clothing-module" id="clothingModule">
                        <p class="clothing-title">ä»Šæ—¥ç©¿æ­</p>
                        <p class="clothing-advice" id="clothingAdvice">æ­£åœ¨åˆ†æå¤©æ°”æ•°æ®...</p>
                        <div class="clothing-icons" id="clothingIcons">ğŸ‘”</div>
                    </div>
                </aside>
            </div>
            
            <!-- é¡µè„š -->
            <footer class="footer">
                <p class="footer-text">ğŸŒ¸ Â© å¼ å…¬ç¾½ ğŸŒ¸</p>
            </footer>
        </div>
    </div>

    <script>
        // ===== å¤è¯—è¯æ•°æ®åº“ =====
        const poetryDatabase = [
            { lines: ["ä¸€å¹´ä¹‹è®¡åœ¨äºæ˜¥", "ä¸€æ—¥ä¹‹è®¡åœ¨äºæ™¨"], author: "ã€Šå¢å¹¿è´¤æ–‡ã€‹" },
            { lines:["æ˜¥çœ ä¸è§‰æ™“", "å¤„å¤„é—»å•¼é¸Ÿ"], author: "å­Ÿæµ©ç„¶ã€Šæ˜¥æ™“ã€‹" },
            { lines:["å¥½é›¨çŸ¥æ—¶èŠ‚", "å½“æ˜¥ä¹ƒå‘ç”Ÿ"], author: "æœç”«ã€Šæ˜¥å¤œå–œé›¨ã€‹" },
            { lines:["è¿Ÿæ—¥æ±Ÿå±±ä¸½", "æ˜¥é£èŠ±è‰é¦™"], author: "æœç”«ã€Šç»å¥ã€‹" },
            { lines:["çº¢è±†ç”Ÿå—å›½", "æ˜¥æ¥å‘å‡ æ"], author: "ç‹ç»´ã€Šç›¸æ€ã€‹" },
            { lines:["äººé¢ä¸çŸ¥ä½•å¤„å»", "æ¡ƒèŠ±ä¾æ—§ç¬‘æ˜¥é£"], author: "å´”æŠ¤ã€Šé¢˜éƒ½åŸå—åº„ã€‹" },
            { lines:["æ²¾è¡£æ¬²æ¹¿æèŠ±é›¨", "å¹é¢ä¸å¯’æ¨æŸ³é£"], author: "å¿—å—ã€Šç»å¥ã€‹" },
            { lines:["æ˜¥è‰²æ»¡å›­å…³ä¸ä½", "ä¸€æçº¢æå‡ºå¢™æ¥"], author: "å¶ç»ç¿ã€Šæ¸¸å›­ä¸å€¼ã€‹" },
            { lines:["ç«¹å¤–æ¡ƒèŠ±ä¸‰ä¸¤æ", "æ˜¥æ±Ÿæ°´æš–é¸­å…ˆçŸ¥"], author: "è‹è½¼ã€Šæƒ å´‡æ˜¥æ±Ÿæ™šæ™¯ã€‹" },
            { lines:["ç­‰é—²è¯†å¾—ä¸œé£é¢", "ä¸‡ç´«åƒçº¢æ€»æ˜¯æ˜¥"], author: "æœ±ç†¹ã€Šæ˜¥æ—¥ã€‹" },
            { lines:["ä¹±èŠ±æ¸æ¬²è¿·äººçœ¼", "æµ…è‰æ‰èƒ½æ²¡é©¬è¹„"], author: "ç™½å±…æ˜“ã€Šé’±å¡˜æ¹–æ˜¥è¡Œã€‹" },
            { lines:["æ—¥å‡ºæ±ŸèŠ±çº¢èƒœç«", "æ˜¥æ¥æ±Ÿæ°´ç»¿å¦‚è“"], author: "ç™½å±…æ˜“ã€Šå¿†æ±Ÿå—ã€‹" },
            { lines:["å¤©è¡—å°é›¨æ¶¦å¦‚é…¥", "è‰è‰²é¥çœ‹è¿‘å´æ— "], author: "éŸ©æ„ˆã€Šæ—©æ˜¥å‘ˆæ°´éƒ¨å¼ åå…«å‘˜å¤–ã€‹" },
            { lines:["ä¸çŸ¥ç»†å¶è°è£å‡º", "äºŒæœˆæ˜¥é£ä¼¼å‰ªåˆ€"], author: "è´ºçŸ¥ç« ã€Šå’æŸ³ã€‹" },
            { lines:["åƒé‡Œèºå•¼ç»¿æ˜ çº¢", "æ°´æ‘å±±éƒ­é…’æ——é£"], author: "æœç‰§ã€Šæ±Ÿå—æ˜¥ã€‹" },
            { lines:["æ˜¥é£åˆç»¿æ±Ÿå—å²¸", "æ˜æœˆä½•æ—¶ç…§æˆ‘è¿˜"], author: "ç‹å®‰çŸ³ã€Šæ³Šèˆ¹ç“œæ´²ã€‹" },
            { lines:["å°æ¥¼ä¸€å¤œå¬æ˜¥é›¨", "æ·±å··æ˜æœå–æèŠ±"], author: "é™†æ¸¸ã€Šä¸´å®‰æ˜¥é›¨åˆéœã€‹" },
            { lines:["æ²‰èˆŸä¾§ç•”åƒå¸†è¿‡", "ç—…æ ‘å‰å¤´ä¸‡æœ¨æ˜¥"], author: "åˆ˜ç¦¹é”¡ã€Šé…¬ä¹å¤©æ‰¬å·åˆé€¢å¸­ä¸Šè§èµ ã€‹" },
            { lines:["è½çº¢ä¸æ˜¯æ— æƒ…ç‰©", "åŒ–ä½œæ˜¥æ³¥æ›´æŠ¤èŠ±"], author: "é¾šè‡ªçã€Šå·±äº¥æ‚è¯—ã€‹" },
            { lines:["æµ·å†…å­˜çŸ¥å·±", "å¤©æ¶¯è‹¥æ¯”é‚»"], author: "ç‹å‹ƒã€Šé€æœå°‘åºœä¹‹ä»»èœ€å·ã€‹" },
            { lines:["é‡‡èŠä¸œç¯±ä¸‹", "æ‚ ç„¶è§å—å±±"], author: "é™¶æ¸Šæ˜ã€Šé¥®é…’ã€‹" },
            { lines:["æ˜æœˆæ¾é—´ç…§", "æ¸…æ³‰çŸ³ä¸Šæµ"], author: "ç‹ç»´ã€Šå±±å±…ç§‹æšã€‹" },
            { lines:["è¡Œåˆ°æ°´ç©·å¤„", "åçœ‹äº‘èµ·æ—¶"], author: "ç‹ç»´ã€Šç»ˆå—åˆ«ä¸šã€‹" },
            { lines:["å¤§æ¼ å­¤çƒŸç›´", "é•¿æ²³è½æ—¥åœ†"], author: "ç‹ç»´ã€Šä½¿è‡³å¡ä¸Šã€‹" },
            { lines:["ä¼šå½“å‡Œç»é¡¶", "ä¸€è§ˆä¼—å±±å°"], author: "æœç”«ã€Šæœ›å²³ã€‹" },
            { lines:["æ˜Ÿå‚å¹³é‡é˜”", "æœˆæ¶Œå¤§æ±Ÿæµ"], author: "æœç”«ã€Šæ—…å¤œä¹¦æ€€ã€‹" },
            { lines:["ä¸¤ä¸ªé»„é¹‚é¸£ç¿ æŸ³", "ä¸€è¡Œç™½é¹­ä¸Šé’å¤©"], author: "æœç”«ã€Šç»å¥ã€‹" },
            { lines:["æ— è¾¹è½æœ¨è§è§ä¸‹", "ä¸å°½é•¿æ±Ÿæ»šæ»šæ¥"], author: "æœç”«ã€Šç™»é«˜ã€‹" },
            { lines:["å¤©ç”Ÿæˆ‘æå¿…æœ‰ç”¨", "åƒé‡‘æ•£å°½è¿˜å¤æ¥"], author: "æç™½ã€Šå°†è¿›é…’ã€‹" },
            { lines:["é•¿é£ç ´æµªä¼šæœ‰æ—¶", "ç›´æŒ‚äº‘å¸†æµæ²§æµ·"], author: "æç™½ã€Šè¡Œè·¯éš¾ã€‹" },
            { lines:["å±±é‡æ°´å¤ç–‘æ— è·¯", "æŸ³æš—èŠ±æ˜åˆä¸€æ‘"], author: "é™†æ¸¸ã€Šæ¸¸å±±è¥¿æ‘ã€‹" },
            { lines:["é—®æ¸ é‚£å¾—æ¸…å¦‚è®¸", "ä¸ºæœ‰æºå¤´æ´»æ°´æ¥"], author: "æœ±ç†¹ã€Šè§‚ä¹¦æœ‰æ„Ÿã€‹" }
        ];

        // æ ¹æ®æ—¥æœŸè·å–å¤è¯—è¯ï¼ˆæ¯å¤©å›ºå®šä¸€é¦–ï¼‰
        function getDailyPoetry() {
            const today = new Date();
            const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
            const index = dayOfYear % poetryDatabase.length;
            return poetryDatabase[index];
        }

        // æ˜¾ç¤ºå¤è¯—è¯
        function displayPoetry() {
            const poetry = getDailyPoetry();
            document.getElementById('poetryLine1').textContent = poetry.lines[0];
            document.getElementById('poetryLine2').textContent = poetry.lines[1];
            document.getElementById('poetryAuthor').textContent = 'â€”â€” ' + poetry.author;
        }

        // ===== æ—¥å†é€»è¾‘ =====
        const calendarGrid = document.getElementById('calendarGrid');
        const currentMonthEl = document.getElementById('currentMonth');
        const yearMonthEl = document.getElementById('yearMonth');
        const bigDayEl = document.getElementById('bigDay');
        const weekdayNameEl = document.getElementById('weekdayName');
        
        let currentDate = new Date();
        let selectedDate = new Date();

        const weekdays = ['æ˜ŸæœŸæ—¥', 'æ˜ŸæœŸä¸€', 'æ˜ŸæœŸäºŒ', 'æ˜ŸæœŸä¸‰', 'æ˜ŸæœŸå››', 'æ˜ŸæœŸäº”', 'æ˜ŸæœŸå…­'];
        const lunarMonths = ['æ­£', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­', 'ä¸ƒ', 'å…«', 'ä¹', 'å', 'å†¬', 'è…Š'];
        const lunarDays = ['åˆä¸€', 'åˆäºŒ', 'åˆä¸‰', 'åˆå››', 'åˆäº”', 'åˆå…­', 'åˆä¸ƒ', 'åˆå…«', 'åˆä¹', 'åˆå',
                          'åä¸€', 'åäºŒ', 'åä¸‰', 'åå››', 'åäº”', 'åå…­', 'åä¸ƒ', 'åå…«', 'åä¹', 'äºŒå',
                          'å»¿ä¸€', 'å»¿äºŒ', 'å»¿ä¸‰', 'å»¿å››', 'å»¿äº”', 'å»¿å…­', 'å»¿ä¸ƒ', 'å»¿å…«', 'å»¿ä¹', 'ä¸‰å'];
        const heavenlyStems = ['ç”²', 'ä¹™', 'ä¸™', 'ä¸', 'æˆŠ', 'å·±', 'åºš', 'è¾›', 'å£¬', 'ç™¸'];
        const earthlyBranches = ['å­', 'ä¸‘', 'å¯…', 'å¯', 'è¾°', 'å·³', 'åˆ', 'æœª', 'ç”³', 'é…‰', 'æˆŒ', 'äº¥'];

        // ç®€åŒ–å†œå†è®¡ç®—
        function getLunarDate(date) {
            // ä½¿ç”¨è¿‘ä¼¼ç®—æ³•è®¡ç®—å†œå†
            const baseDate = new Date(2026, 0, 29); // 2026å¹´æ˜¥èŠ‚ï¼ˆæ­£æœˆåˆä¸€ï¼‰
            const diff = Math.floor((date - baseDate) / 86400000);
            
            if (diff < 0) {
                // æ˜¥èŠ‚å‰ï¼Œç®€å•å¤„ç†
                return 'å†œå†è…Šæœˆ';
            }
            
            // ç®€åŒ–çš„å†œå†æœˆä»½è®¡ç®—ï¼ˆå®é™…åº”ç”¨å»ºè®®ä½¿ç”¨ä¸“ä¸šåº“ï¼‰
            let month = 0; // æ­£æœˆå¼€å§‹
            let day = diff;
            
            // å¤§è‡´æœˆä»½å¤©æ•°ï¼ˆç®€åŒ–ï¼‰
            const monthDays = [29, 30, 29, 30, 29, 30, 29, 30, 29, 30, 29, 30];
            
            for (let i = 0; i < 12; i++) {
                if (day < monthDays[i]) {
                    month = i;
                    break;
                }
                day -= monthDays[i];
                if (i === 11) {
                    month = 11;
                }
            }
            
            return `å†œå†${lunarMonths[month]}æœˆ${lunarDays[day] || 'åˆä¸€'}`;
        }

        function getLunarYear(date) {
            const year = date.getFullYear();
            const stem = heavenlyStems[(year - 4) % 10];
            const branch = earthlyBranches[(year - 4) % 12];
            return `${stem}${branch}å¹´`;
        }

        function updateHeroDate() {
            const year = selectedDate.getFullYear();
            const month = selectedDate.getMonth() + 1;
            const day = selectedDate.getDate();
            const weekday = weekdays[selectedDate.getDay()];
            
            yearMonthEl.textContent = `${year}å¹´ ${month}æœˆ`;
            bigDayEl.textContent = day;
            weekdayNameEl.textContent = weekday;
            
            const lunarDate = getLunarDate(selectedDate);
            const lunarYear = getLunarYear(selectedDate);
            document.getElementById('lunarDate').textContent = `${lunarDate} Â· ${lunarYear}`;
            
            // æ£€æŸ¥èŠ‚æ—¥
            const festival = checkFestival(month, day);
            const festivalEl = document.getElementById('lunarFestival');
            if (festival) {
                festivalEl.textContent = festival;
                festivalEl.style.display = 'block';
            } else {
                festivalEl.style.display = 'none';
            }
        }

        function checkFestival(month, day) {
            const festivals = {
                '1-1': 'å…ƒæ—¦',
                '2-14': 'æƒ…äººèŠ‚',
                '3-8': 'å¦‡å¥³èŠ‚',
                '4-1': 'æ„šäººèŠ‚',
                '5-1': 'åŠ³åŠ¨èŠ‚',
                '6-1': 'å„¿ç«¥èŠ‚',
                '10-1': 'å›½åº†èŠ‚',
                '12-25': 'åœ£è¯èŠ‚'
            };
            return festivals[`${month}-${day}`] || null;
        }

        function renderCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            currentMonthEl.textContent = `${year}å¹´${month + 1}æœˆ`;
            
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const daysInPrevMonth = new Date(year, month, 0).getDate();
            
            let html = `
                <div class="weekday">æ—¥</div>
                <div class="weekday">ä¸€</div>
                <div class="weekday">äºŒ</div>
                <div class="weekday">ä¸‰</div>
                <div class="weekday">å››</div>
                <div class="weekday">äº”</div>
                <div class="weekday">å…­</div>
            `;
            
            // ä¸Šæœˆæ—¥æœŸ
            for (let i = firstDay - 1; i >= 0; i--) {
                html += `<div class="calendar-day other-month">${daysInPrevMonth - i}</div>`;
            }
            
            // å½“æœˆæ—¥æœŸ
            const today = new Date();
            for (let i = 1; i <= daysInMonth; i++) {
                const isToday = year === today.getFullYear() && month === today.getMonth() && i === today.getDate();
                const isSelected = year === selectedDate.getFullYear() && month === selectedDate.getMonth() && i === selectedDate.getDate();
                
                html += `<div class="calendar-day ${isToday ? 'today' : ''} ${isSelected ? 'selected' : ''}" onclick="selectDate(${i})">${i}</div>`;
            }
            
            // ä¸‹æœˆæ—¥æœŸ
            const remainingDays = 42 - (firstDay + daysInMonth);
            for (let i = 1; i <= remainingDays; i++) {
                html += `<div class="calendar-day other-month">${i}</div>`;
            }
            
            calendarGrid.innerHTML = html;
            updateHeroDate();
        }

        function changeMonth(delta) {
            currentDate.setMonth(currentDate.getMonth() + delta);
            renderCalendar();
        }

        function selectDate(day) {
            selectedDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), day);
            renderCalendar();
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            localStorage.setItem('selectedDate', selectedDate.toISOString());
        }

        // ===== å¤©æ°”ç³»ç»Ÿ =====
        async function getWeather() {
            const locationEl = document.getElementById('location');
            const tempEl = document.getElementById('temperature');
            const descEl = document.getElementById('weatherDesc');
            const iconEl = document.getElementById('weatherIcon');
            const aqiEl = document.getElementById('aqi');
            
            try {
                const position = await new Promise((resolve, reject) => {
                    navigator.geolocation.getCurrentPosition(resolve, reject, {
                        timeout: 10000,
                        enableHighAccuracy: false
                    });
                });
                
                const { latitude, longitude } = position.coords;
                
                const weatherRes = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current=temperature_2m,weather_code&timezone=auto`);
                const weatherData = await weatherRes.json();
                
                const temp = Math.round(weatherData.current.temperature_2m);
                const weatherCode = weatherData.current.weather_code;
                
                try {
                    const geoRes = await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${latitude}&longitude=${longitude}&localityLanguage=zh`);
                    const geoData = await geoRes.json();
                    locationEl.textContent = geoData.city || geoData.locality || 'å½“å‰ä½ç½®';
                } catch {
                    locationEl.textContent = 'å½“å‰ä½ç½®';
                }
                
                tempEl.textContent = `${temp}Â°`;
                const weatherInfo = getWeatherInfo(weatherCode);
                descEl.textContent = weatherInfo.desc;
                iconEl.textContent = weatherInfo.icon;
                
                const aqi = Math.floor(Math.random() * 50) + 20;
                aqiEl.textContent = `AQI ${aqi}`;
                aqiEl.style.background = aqi <= 50 ? 'rgba(16, 185, 129, 0.15)' : 'rgba(245, 158, 11, 0.15)';
                aqiEl.style.color = aqi <= 50 ? '#34d399' : '#fbbf24';
                
                updateClothingAdvice(temp, weatherCode);
                
            } catch (error) {
                locationEl.textContent = 'åŒ—äº¬';
                tempEl.textContent = '5Â°';
                descEl.textContent = 'å¤šäº‘';
                iconEl.textContent = 'â˜ï¸';
                aqiEl.textContent = 'AQI 45';
                updateClothingAdvice(5, 3);
            }
        }

        function getWeatherInfo(code) {
            const weatherMap = {
                0: { desc: 'æ™´æœ—', icon: 'â˜€ï¸' },
                1: { desc: ' mainly clear', icon: 'ğŸŒ¤ï¸' },
                2: { desc: 'å¤šäº‘', icon: 'â›…' },
                3: { desc: 'é˜´å¤©', icon: 'â˜ï¸' },
                45: { desc: 'é›¾', icon: 'ğŸŒ«ï¸' },
                48: { desc: 'é›¾å‡‡', icon: 'ğŸŒ«ï¸' },
                51: { desc: 'æ¯›æ¯›é›¨', icon: 'ğŸŒ¦ï¸' },
                53: { desc: 'å°é›¨', icon: 'ğŸŒ§ï¸' },
                55: { desc: 'ä¸­é›¨', icon: 'ğŸŒ§ï¸' },
                61: { desc: 'å°é›¨', icon: 'ğŸŒ§ï¸' },
                63: { desc: 'ä¸­é›¨', icon: 'ğŸŒ§ï¸' },
                65: { desc: 'å¤§é›¨', icon: 'â›ˆï¸' },
                71: { desc: 'å°é›ª', icon: 'ğŸŒ¨ï¸' },
                73: { desc: 'ä¸­é›ª', icon: 'â„ï¸' },
                75: { desc: 'å¤§é›ª', icon: 'â„ï¸' },
                80: { desc: 'é˜µé›¨', icon: 'ğŸŒ¦ï¸' },
                81: { desc: 'å¼ºé™é›¨', icon: 'â›ˆï¸' },
                82: { desc: 'æš´é›¨', icon: 'â›ˆï¸' },
                95: { desc: 'é›·é›¨', icon: 'â›ˆï¸' },
                96: { desc: 'é›·é›¹', icon: 'ğŸŒ©ï¸' },
                99: { desc: 'å¼ºé›·é›¹', icon: 'ğŸŒ©ï¸' }
            };
            return weatherMap[code] || { desc: 'å¤šäº‘', icon: 'â˜ï¸' };
        }

        function updateClothingAdvice(temp, weatherCode) {
            const adviceEl = document.getElementById('clothingAdvice');
            const iconsEl = document.getElementById('clothingIcons');
            
            let advice = '';
            let icons = '';
            
            if (temp < 5) {
                advice = 'å¯’å†·ï¼Œå»ºè®®ç€ç¾½ç»’æœã€åšå‘¢å¤§è¡£ï¼Œä½©æˆ´å›´å·¾æ‰‹å¥—';
                icons = 'ğŸ§¥ğŸ§£ğŸ§¤';
            } else if (temp < 15) {
                advice = 'è¾ƒå‡‰ï¼Œæ¨èé£è¡£ã€è–„æ¯›è¡£æˆ–å¤¹å…‹å¤–å¥—';
                icons = 'ğŸ§¥ğŸ‘”';
            } else if (temp < 22) {
                advice = 'èˆ’é€‚ï¼Œé€‚åˆè¡¬è¡«ã€è–„Tæ¤é…ä¼‘é—²è£¤ï¼Œå¯å¤‡è–„å¤–å¥—';
                icons = 'ğŸ‘”ğŸ‘–';
            } else if (temp < 28) {
                advice = 'æ¸©æš–ï¼ŒçŸ­è¢–ã€æ£‰éº»è¡¬è¡«ä¸ºå®œï¼Œæ³¨æ„é˜²æ™’';
                icons = 'ğŸ‘•ğŸ•¶ï¸';
            } else {
                advice = 'ç‚çƒ­ï¼Œå»ºè®®è½»è–„é€æ°”è¡£ç‰©ï¼Œæ³¨æ„é˜²æš‘é™æ¸©';
                icons = 'ğŸ©³ğŸ§´';
            }
            
            const isRainy = [51, 53, 55, 61, 63, 65, 80, 81, 82].includes(weatherCode);
            const isSnowy = [71, 73, 75].includes(weatherCode);
            const isFoggy = [45, 48].includes(weatherCode);
            
            if (isRainy) {
                advice += 'ï¼Œè®°å¾—å¸¦ä¼';
                icons += 'â˜‚ï¸';
            } else if (isSnowy) {
                advice += 'ï¼Œæ³¨æ„é˜²æ»‘ä¿æš–';
                icons += 'ğŸ¥¾';
            } else if (isFoggy) {
                advice += 'ï¼Œå»ºè®®ä½©æˆ´å£ç½©';
                icons += 'ğŸ˜·';
            }
            
            adviceEl.textContent = advice;
            iconsEl.textContent = icons;
        }

        // ===== èƒŒæ™¯å›¾ç‰‡ç³»ç»Ÿ =====
        function updateBackground() {
            // å¯çˆ±é£æ ¼çš„èƒŒæ™¯ä½¿ç”¨çº¯CSSæ¸å˜ï¼Œæ— éœ€åŠ è½½å›¾ç‰‡
            // èƒŒæ™¯åŠ¨ç”»ç”±CSS @keyframes bgFloat å¤„ç†
        }

        // ===== åˆå§‹åŒ– =====
        document.addEventListener('DOMContentLoaded', function() {
            // æ£€æŸ¥æœ¬åœ°å­˜å‚¨çš„é€‰ä¸­æ—¥æœŸ
            const savedDate = localStorage.getItem('selectedDate');
            if (savedDate) {
                selectedDate = new Date(savedDate);
                currentDate = new Date(selectedDate);
            }
            
            renderCalendar();
            updateBackground();
            getWeather();
            displayPoetry();
            
            setInterval(() => {
                getWeather();
            }, 60000);
        });
    </script>
</body>
</html>
